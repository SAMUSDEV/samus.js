<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8" />
	<title>GLoader</title>
	<meta name="author" content="Cristiano Caldas" />
	<script type="text/javascript" charset="utf-8" src="../bin/geleca.1.0.js"></script>
	<script type="text/javascript" charset="utf-8">
	
		window.onload = window_onLoad;
		
		function window_onLoad() {
			var body 		= document.getElementsByTagName("body")[0];
			
			var loader 		= new GLoader();
			var base 		= "asset/bitmap/gloader/";
			var prl_loader 	= document.getElementById("prl_loader");
			
			loader.addItem(new LoaderItem("1", base + "image-1.png", 33));
			loader.addItem(new LoaderItem("2", base + "image-2.png", 8));
			loader.addItem(new LoaderItem("3", base + "image-3.png", 4));
			loader.addItem(new LoaderItem("4", base + "image-4.png", 4));
			loader.addItem(new LoaderItem("5", base + "image-5.png", 4));
			loader.addItem(new LoaderItem("6", base + "image-6.png", 4));
			loader.addItem(new LoaderItem("7", base + "image-7.png", 8));
			loader.addItem(new LoaderItem("8", base + "image-8.png", 4));
			loader.addItem(new LoaderItem("9", base + "image-9.png", 4));
			loader.addItem(new LoaderItem("10", base + "image-10.png", 4));
			loader.addItem(new LoaderItem("11", base + "image-11.png", 41));
			loader.addItem(new LoaderItem("12", base + "image-12.jpg", 573));
			loader.addItem(new LoaderItem("13", base + "image-13.png", 4));
			loader.addItem(new LoaderItem("14", base + "image-14.png", 4));
			loader.addItem(new LoaderItem("15", base + "image-15.jpg", 573));
			loader.addItem(new LoaderItem("16", base + "image-16.jpg", 573));
			loader.addItem(new LoaderItem("17", base + "image-17.jpg", 573));
			
			loader.addEventListener(ProgressEvent.PROGRESS, loader_progress);
			loader.addEventListener(Event.COMPLETE, 		loader_complete);
			
			function loader_progress(e) {
				
				var progress = String(loader.progress * 100) + "%";
				console.log("loader_progress:" + progress);
				prl_loader.style.width = progress;
			}
			
			function loader_complete(e) {
				showLoadedItems();
			}
			
			function showLoadedItems() {
				var item;
				var img;
				for (var i=0; i < loader.items.length; i++) {
					item = loader.getItem(String(i+1));
					img = document.createElement("img");
					img.src = item.src;
					img.width = "50";
					img.height = "50";
					body.appendChild(img);
				};
			}
			
			loader.load();
			//showLoadedItems();
		}
		
	</script>
	
	<style type="text/css">
		#prl_loader {
			width: 0%;
			height: 5px;
			background: #ff0000;
		}
		
	</style>
</head>
<body>
	
	<div id="prl_loader">
		
	</div>
	
	<br />

</body>
</html>
